<!doctype html>
<!--[if IE 9]><html class="lt-ie10" lang="en" > <![endif]-->
<html class="no-js" lang="en" >
<head>
<meta name="viewport" content="initial-scale=1.0" />
<title>Missing Persons Tips</title>
<link href='assets/css/foundation.css' rel='stylesheet' />
<link href='assets/css/app.css' rel='stylesheet' />
<script src="assets/js/vendor/custom.modernizr.js"></script>
</head>
<body>
<div class="fixed">
  <nav class="top-bar" data-topbar>
  <div class="large-11 small-10 columns">
    <ul class="title-area">
    <li class="name">
      <h1><a href="#">Missing Persons Tips</a></h1>
    </li>
  </ul>
  </div>
  <div class="large-1 small-2 columns">
      <a href="#">Info</i></a>
  </div>
  </nav>
</div>

<div class="row">
  <div class="iamaPanelSubmitted hide">
    <div class="small-8 columns">
      <p>I am a <b><span class="iamaValue"></span></b></p>
      <p>Responding to a <b><span class="respondingValue"></span></b></p>
    </div>
    <div class="small-4 columns">
      <p><a href="#" class="button panelTrigger" data-panel="iamaPanel"><i class="fi-rewind"></i><br>Restart</a></p>
    </div>
  </div>
  <div class="large-12 columns iamaPanel">
    <form id="iamaForm" action="#" method="post">
      <fieldset>
        <legend>Complete the following</legend>
        <div class="row">
          <div class="large-12 columns">
            <label for="iama">I am a... </label>
            <select id="iama" name="iama" class="iama">
              <option value="First Responder">First Responder</option>
              <option value="Dispatcher">Dispatcher</option>
              <option value="Supervisor">Supervisor</option>
            </select>
          </div>
        </div>
        <div class="row">
          <div class="large-12 columns">
            <label for="responding">Responding to a... </label>
            <select id="responding" name="responding" class="responding">
              <option value="Missing Child">Missing Child</option>
              <option value="Missing College Student">Missing College Student</option>
              <option value="Missing Vulnerable Adult">Missing Vulnerable Adult</option>
            </select>
          </div>
        </div>
        <div class="row">
          <div class="large-12 columns">
            <p><button type="submit">Next <i class="fi-play"></i></button></p>
          </div>
        </div>
        <div id="disclaimer" name="disclaimer">
          <p>Disclaimer:</p>
          <p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est.</p>
        </div>
      </fieldset>

    </form>
  </div>
</div>
<div class="row circumstancesContainer hide">
  <form id="circumstancesForm" action="#" method="post">
    <div class="columns large-12">
      <h3 class="panelTrigger plusToggle openPanel" data-panel="circumstancesPanel">
        <i class="fi-plus hide"></i> <i class="fi-minus"></i> Circumstances</h3>
        <p class="circError hide">Please Check at least one of the circumstances below.</p>
      <div class="circumstancesPanel">
        <div class="large-4 medium-6 small-12 columns">
          <fieldset>
            <legend>Health and Safety</legend>
            <input id="alzheimers" value="alzheimers" class="highUrgency" type="checkbox">
            <label for="alzheimers">Alzheimer's Disease</label><br>
            <input id="alcohol" value="alcohol" class="mediumUrgency" type="checkbox">
            <label for="alcohol">Alcoholic / drug user</label><br>
            <input id="mildRetardation" value="mildRetardation" class="mediumUrgency" type="checkbox">
            <label for="mildRetardation">Mild Mental Retardation</label><br>
            <input id="moderateRetardation" value="moderateRetardation" class="highUrgency" type="checkbox">
            <label for="moderateRetardation">Moderate to Severe Mental Retardation</label><br>
            <input id="suicidal" value="suicidal" class="highUrgency" type="checkbox">
            <label for="suicidal">Despondent/Suicidal</label>
          </fieldset>
        </div>
        <div class="large-4 medium-6 small-12 columns">
          <fieldset>
            <legend>Age</legend>
            <input id="under14" value="under14" class="highUrgency" type="checkbox">
            <label for="under14">Children Under 14</label><br>
            <input id="teen" value="teen" class="mediumUrgency" type="checkbox">
            <label for="teen">Children 14-18</label><br>
            <input id="elderly" value="elderly" class="mediumUrgency" type="checkbox">
            <label for="elderly">Elderly Adult</label>
          </fieldset>
        </div>
        <div class="large-4 medium-6 small-12 columns">
          <fieldset>
            <legend>Incident</legend>
            <input id="runaway" value="runaway" class="lowUrgency" type="checkbox">
            <label for="runaway">Runaway/ sneak away adult</label><br>
            <input id="fugitive" value="fugutive" class="lowUrgency" type="checkbox">
            <label for="fugitive">Fugitive of non-violent crime</label><br>
            <input id="miscommunication" value="miscommunication" class="lowUrgency" type="checkbox">
            <label for="miscommunication">Miscommunication</label><br>
            <input id="late" value="late" class="lowUrgency" type="checkbox">
            <label for="late">Late Return from Activity</label><br>
            <input id="kidnapped" value="kidnapped" class="highUrgency" type="checkbox">
            <label for="kidnapped">Kidnapped</label><br>
            <input id="abducted" value="abducted" class="highUrgency" type="checkbox">
            <label for="abducted">Abducted</label><br>
            <input id="unknown" value="unknown" class="lowUrgency" type="checkbox">
            <label for="unknown">Unknown Incident</label>
          </fieldset>
        </div>
        <div class="large-12 columns">
          <p><button type="submit">Go <i class="fi-play"></i></button></p>
        </div>
      </div>
    </div>
  </form>
</div>
<div class="tipsContainer hide">
  <div class="row">
    <div class="large-12 columns">
      <dl class="sub-nav">
        <dt>View:</dt>
        <dd class="active"><a href="#">All</a></dd>
        <dd><a href="#">Tips</a></dd>
        <dd><a href="#">Contacts</a></dd>
        <dd><a href="#">Other</a></dd>
      </dl>
    </div>
  </div>
  <div class="row">
    <div class="large-12 columns">
      <p class="highUrgency">Full search effort using maximum available resources and tactics</p>
      <p class="highUrgency">Maximum public notification (AMBER, Missing Child/College Student or Vulnerable Adult Alert)</p>
      <p class="highUrgency">Calling in mutual aid resources</p>
      <p class="highUrgency mediumUrgency">Activation of additional law enforcement and search teams</p>
      <p class="highUrgency mediumUrgency">Expanded search effort with additional resources and search teams</p>
      <p class="highUrgency mediumUrgency">Additional public notification, including media and electronic messaging</p>
      <p class="highUrgency mediumUrgency lowUrgency">BOLO for law enforcement agencies</p>
      <p class="highUrgency mediumUrgency lowUrgency">Hasty search of area around PLS and likely places the person might be</p>
      <p class="highUrgency mediumUrgency lowUrgency">Investigation of the incident including interview of appropriate persons</p>
    </div>
  </div>
</div>
<script src="assets/js/vendor/jquery.js"></script>
<script>
  var $body             = $('body'),
      $circForm         = $('#circumstancesForm');
      $tipCheckBox      = $circForm.find('input'),
      $tips             = $('.tipsContainer'),
      $tipHighUrgency   = $tips.find('.highUrgency'),
      $tipMediumUrgency = $tips.find('.mediumUrgency'),
      $tipLowUrgency    = $tips.find('.lowUrgency'),
      $panelTrigger     = $('.panelTrigger'),
      $panelContent     = $('.panelContent'),
      $panelSubmitted   = $('.iamaPanelSubmitted'),
      $iamaField        = $('.iama'),
      $respondingField  = $('.responding'),
      $iamaValue        = $('.iamaValue'),
      $respondingValue  = $('.respondingValue'),
      $circError  = $('.circError'),
      isPanelOpen = true;

  var hideTips = function(){
    $tips.find('p').addClass('hide');
  },
  togglePlusMinus = function(isReset){
    // If the panel is open, we're closing it so turn the minus into a plus
    // If we're not resetting the panel to default
    var isReset = isReset || false;
    // console.log("isreset: " + isReset);
    // console.log("Before If statement, isPanel Open: " + isPanelOpen);
    if (isPanelOpen && !isReset){
      // console.log("open, closing");
      $('.plusToggle')
        .find('.fi-minus').addClass('hide').end()
        .find('.fi-plus').removeClass('hide');
        isPanelOpen = false;
    } else if (!isPanelOpen || isReset) {
      // console.log("closed, opening");
    // If the panel is closed, we're opening it so turn the plus into a minus
    // OR if we're resetting the panel to default
      $('.plusToggle')
        .find('.fi-minus').removeClass('hide').end()
        .find('.fi-plus').addClass('hide');
        isPanelOpen = true;
    }
    // console.log("after If statemen, isPanel open: " + isPanelOpen);
  };


  $.getScript('assets/js/foundation.js', function(){
    $(document).foundation();
  });

  hideTips();

  // Initial "I am A" form
  $body.on('submit', '#iamaForm', function(e){
    e.preventDefault();

    $iamaValue.text($iamaField.val());
    $respondingValue.text($respondingField.val());


    $panelSubmitted.slideDown();
    $('.iamaPanel').slideUp();
    $('.circumstancesPanel').show();
    $('.circumstancesContainer').slideDown();
  });

  // Circumstances Form Submitted
  $body.on('submit', '#circumstancesForm', function(e){
    e.preventDefault();

    var hasChecked = false,
        isValid = false;

    hideTips();

    $tipCheckBox.each(function(){
      var $this = $(this);

      if ($this.hasClass('highUrgency') && $this.is(':checked')){
        $tipHighUrgency.removeClass('hide');
      }
      if ($this.hasClass('mediumUrgency') && $this.is(':checked')){
        $tipMediumUrgency.removeClass('hide');
      }
      if ($this.hasClass('lowUrgency') && $this.is(':checked')){
        $tipLowUrgency.removeClass('hide');
      }
      if ($this.is(':checked')){
        hasChecked = true;
        isValid = true;
      }

    });

    if (hasChecked) {
      window.scrollTo(0, 100)
      $('.circumstancesPanel').slideUp();
      $tips.slideDown();
      togglePlusMinus();
      $circError.hide();
    } else {
      window.scrollTo(0, 100)
      $circError.show();
    }
  });

  // Clicks to both restart button and panel headings
  $body.on('click', '.panelTrigger', function(e){
    e.preventDefault();

    var panelClass = $(this).data('panel'),
        $panel = $('.' + panelClass);

    // Slide Toggle the panel that this trigger targets
    $panel.slideToggle();

    // If you clicked to open or close teh circumstances panel
    if (panelClass == 'circumstancesPanel') {
      // Toggle the pluis minus sign to indicate that its possible
      togglePlusMinus();

      // Slide Toggle the tips
      $tips.slideToggle();
    }

    // If you clicked the Restart Button
    if (panelClass == 'iamaPanel') {

      $circForm[0].reset();
      $circError.hide();

      // hide all the tips individually
      hideTips();

      // If tips is visible, slide toggle it
      $tips.slideUp();

      // Close the filled "I Am A" Panel
      $panelSubmitted.slideUp();

      // Close teh Circumstances Panel
      $('.circumstancesContainer').slideUp();

      // Reset the Plus Minus state of the Circ Panel
      togglePlusMinus(true);

    }
  });




</script>
</body>
</html>